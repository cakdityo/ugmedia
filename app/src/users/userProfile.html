<div layout="column" layout-gt-xs="row">

    <!-- User profile section -->
    <div flex-gt-xs="30" layout="column">

        <!-- Mini avatar, username and name section -->
        <md-card>
            <md-card-header>
                <md-card-avatar>
                    <img ui-sref="user.profile({username: UP.user.profile.username})" class="md-user-avatar"
                         ng-src="{{ UP.user.profile.avatar }}" alt="{{ UP.user.profile.name }}">
                </md-card-avatar>
                <md-card-header-text>
                    <span class="md-title">{{ UP.user.profile.username }}</span>
                    <span class="md-subhead">{{ UP.user.profile.name }}</span>
                </md-card-header-text>
            </md-card-header>
        </md-card>

        <!-- Avatar section -->
        <md-card>
            <img ng-src="{{ UP.user.profile.avatar }}" alt="{{ UP.user.profile.name }}">
        </md-card>

        <!-- User objects section -->
        <div layout="row" layout-align="center center">
            <md-button ui-sref="user.profile.followers" class="user-object-button">
                <div class="user-object-length">{{ UP.user.objects.followers.length }}</div>
                Followers
            </md-button>
            <md-button ui-sref="user.profile.following" class="user-object-button">
                <div class="user-object-length">{{ UP.user.objects.following.length }}</div>
                Following
            </md-button>
            <md-button ui-sref="user.profile({username: UP.user.profile.username})" class="user-object-button">
                <div class="user-object-length">{{ UP.user.posts.length }}</div>
                Posts
            </md-button>
        </div>

        <!-- Follow button section -->
        <div ng-if="U.auth.uid != UP.user.profile.$id" layout="column">
            <md-button ng-if="UP.user.objects.followers.$indexFor(U.auth.uid) < 0"
                       ng-click="UP.followUser(U.auth.uid, UP.user.profile.$id)" class="md-accent md-raised">
                Follow
            </md-button>
            <md-button ng-if="UP.user.objects.followers.$indexFor(U.auth.uid) >= 0"
                       ng-click="UP.unFollowUser(U.auth.uid, UP.user.profile.$id)" class="md-primary md-raised">
                Following
            </md-button>
        </div>

        <!-- User meta section -->
        <md-card>
            <md-card-content>
                <strong>Bio:</strong>

                <p>{{ UP.user.profile.bio }}</p>
            </md-card-content>
        </md-card>
    </div>

    <!-- User object section -->
    <div flex-gt-xs="50" layout="column" ui-view>
        <ug-post-bar user="U.user.profile" users="U.users" posts="UP.user.posts"></ug-post-bar>
        <br/>
         <!--Wrap ng-if in ui-view root element with div so it doesn't throw an error. (angular issue)-->
        <div>
            <div ng-if="UP.user.posts.length == 0"> No post yet</div>
            <ug-post-list ng-if="UP.user.posts.length > 0" user="U.user.profile" posts="UP.user.posts"></ug-post-list>
        </div>
    </div>

</div>