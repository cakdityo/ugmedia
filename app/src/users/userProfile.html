<div layout="row" layout-align-gt-xs="center start" layout-xs="column">
    <div layout="column" flex="30" flex-xs="100">
        <md-card>
            <md-card-header>
                <md-card-avatar>
                    <img class="md-user-avatar" ng-src="{{ UP.user.profile.avatar }}" alt="{{ UP.user.profile.name }}">
                </md-card-avatar>
                <md-card-header-text>
                    <span class="md-title">{{ UP.user.profile.username }}</span>
                    <span class="md-subhead">{{ UP.user.profile.name }}</span>
                </md-card-header-text>
            </md-card-header>
        </md-card>
        <md-card>
            <img ng-src="{{ UP.user.profile.avatar }}" alt="{{ UP.user.profile.name }}">
        </md-card>
        <div flex layout="row" layout-align="center center">
            <md-button ui-sref="user.profile.followers" class="user-object-button">
                <div class="user-object-length">{{ U.countObject(UP.user.objects.followers) }}</div>
                Followers
            </md-button>
            <md-button ui-sref="user.profile.following" class="user-object-button">
                <div class="user-object-length">{{ U.countObject(UP.user.objects.following) }}</div>
                Following
            </md-button>
            <md-button ui-sref="user.profile({username: UP.user.profile.username})" class="user-object-button">
                <div class="user-object-length">{{ UP.user.posts.length }}</div>
                Posts
            </md-button>
        </div>
        <div ng-if="U.auth.uid != UP.user.profile.$id" layout="column">
            <md-button ng-if="!UP.user.objects.followers[U.auth.uid]"
                       ng-click="UP.followUser(U.auth.uid, UP.user.profile.$id)" class="md-accent md-raised">
                Follow
            </md-button>
            <md-button ng-if="UP.user.objects.followers[U.auth.uid]"
                       ng-click="UP.unFollowUser(U.auth.uid, UP.user.profile.$id)" class="md-primary md-raised">
                Following
            </md-button>
        </div>
        <md-card>
            <md-card-content>
                <strong>Bio:</strong>

                <p>{{ UP.user.profile.bio }}</p>
            </md-card-content>
        </md-card>
    </div>
    <div hide-xs flex="5"></div>
    <div layout="column" flex="50" flex-xs="100">
        <div ui-view>
            <ug-post-bar user="U.user.profile" posts="UP.user.posts"></ug-post-bar>
            <br/>
            <!-- Wrap ng-if in ui-view root element with div so it doesn't throw an error. (angular issue) -->
            <div>
                <div ng-if="UP.user.posts.length == 0"> No post yet</div>
                <ug-post-list ng-if="UP.user.posts.length > 0" user="U.user.profile" posts="UP.user.posts"></ug-post-list>
            </div>
        </div>
    </div>
</div>