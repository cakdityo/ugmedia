<md-card class="post-card">
    <md-card-header>
        <md-card-avatar>
            <img ui-sref="user.profile({username: pd.author.username})" class="md-user-avatar" ng-src="{{ pd.author.avatar }}" alt="pd.author.username">
        </md-card-avatar>
        <md-card-header-text>
            <span class="md-title" layout="row">
                {{ pd.author.username }}
                <span flex></span>
                <md-menu md-position-mode="target-right target">
                    <md-button aria-label="Open post menu" class="md-icon-button" ng-click="$mdOpenMenu($event)">
                        <md-icon md-menu-origin>more_horiz</md-icon>
                    </md-button>
                    <md-menu-content width="3">
                        <md-menu-item ng-repeat="menu in pd.menuItems">
                            <md-button ng-click="pd.menuAction(menu.name)">
                                <div layout="row">
                                    <p flex>{{ menu.name }}</p>
                                    <md-icon md-menu-align-target>{{ menu.icon }}</md-icon>
                                </div>
                            </md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </span>
            <span class="md-subhead">{{ pd.author.name }}</span>
        </md-card-header-text>
    </md-card-header>
    <img ng-show="pd.post.pictures" ng-src="{{ pd.post.pictures }}" alt="">

    <!-- Post meta section -->
    <md-card-content>
        {{ pd.post.caption }}
        <div layout="row" layout-align="end end">
            <span class="timestamp">
                <span am-time-ago="pd.post.createdAt"></span>
                <span ng-if="pd.post.editedAt">( Edited <span am-time-ago="pd.post.editedAt"> )</span></span>
            </span>
        </div>
        <md-divider></md-divider>
    </md-card-content>

    <!-- Comment section -->
    <md-card-content ng-if="pd.comments.length > 0">
        <ug-post-comment-list comments="pd.comments" id="{user: pd.user.$id, postAuthor: pd.post.author}"></ug-post-comment-list>
        <md-divider></md-divider>
    </md-card-content>

    <!-- Comment bar section -->
    <md-card-header class="post-bar" layout="row" layout-align="start center">
        <md-card-avatar>
            <img class="md-user-avatar" ng-src="{{ pd.user.avatar }}" alt="{{ pd.user.username }}">
        </md-card-avatar>
        <md-input-container flex layout="column">
            <label>Enter a comment</label>
            <textarea rows="2" ng-model="pd.commentText"></textarea>
        </md-input-container>
        <md-button class="md-icon-button" ng-click="pd.addComment(pd.commentText)">
            <md-icon>send</md-icon>
        </md-button>
    </md-card-header>

</md-card>